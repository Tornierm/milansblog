{"ast":null,"code":"import _slicedToArray from\"/Users/milantornier/Desktop/MySite/milansblog/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _taggedTemplateLiteral from\"/Users/milantornier/Desktop/MySite/milansblog/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";var _templateObject,_templateObject2,_templateObject3,_templateObject4;import{useState,useEffect}from'react';import CommentItem from'./CommentItem';import CommentForm from'./CommentForm';import{retrieveComments}from'../../service/WPService';import styled,{css}from'styled-components';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var CommentSection=styled.section(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\nmargin-bottom:1.5em;\\n\"])));var Button=styled.button(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n    margin-left:4em;\\n    align-self:flex-end;\\n    border: none;\\n    background-color: transparent;\\n    color: var(--secondary);\\n    max-width:8em;\\n\"])));var Container=styled.section(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\n    display:flex;\\n    flex-direction:column;\\n    \",\"\\n\"])),function(props){return props.depth===1&&css(_templateObject4||(_templateObject4=_taggedTemplateLiteral([\"\\n        margin-left: 2em;\\n    \"])));});export default function Comments(props){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),comments=_useState2[0],setComments=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),loaded=_useState4[0],setLoaded=_useState4[1];var _useState5=useState(props.post),_useState6=_slicedToArray(_useState5,1),id=_useState6[0];var _useState7=useState(props.parent),_useState8=_slicedToArray(_useState7,1),parent=_useState8[0];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),updated=_useState10[0],setUpdated=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),hideForm=_useState12[0],setHideForm=_useState12[1];var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),hideReplies=_useState14[0],setHideReplies=_useState14[1];var _useState15=useState('show replies'),_useState16=_slicedToArray(_useState15,2),showRepliesText=_useState16[0],setShowRepliesText=_useState16[1];var _useState17=useState('reply'),_useState18=_slicedToArray(_useState17,2),replyText=_useState18[0],setReplytext=_useState18[1];var _useState19=useState(props.depth),_useState20=_slicedToArray(_useState19,1),depth=_useState20[0];useEffect(function(){retrieveComments(id,parent).then(function(res){return setComments(res);},setLoaded(true),setUpdated(false));return function cleanup(){setLoaded(false);};},[id,parent,updated]);var showReplies=function showReplies(){setHideReplies(!hideReplies);if(hideReplies){setShowRepliesText('show replies');}else{setShowRepliesText('hide replies');}};var showForm=function showForm(){setHideForm(!hideForm);if(hideForm){setReplytext('reply');}else{setReplytext('cancel');}};if(loaded){return/*#__PURE__*/_jsx(CommentSection,{children:/*#__PURE__*/_jsxs(Container,{depth:depth,children:[depth===1&&/*#__PURE__*/_jsx(Button,{onClick:function onClick(){return showForm();},children:replyText}),(depth===0||hideForm)&&/*#__PURE__*/_jsx(CommentForm,{updated:function updated(a){return setUpdated(a);},post:id,parent:parent},'commentForm'+{parent:parent}),depth===1&&/*#__PURE__*/_jsx(Button,{onClick:function onClick(){return showReplies();},children:showRepliesText}),(depth===0||hideReplies)&&comments.map(function(comment){return/*#__PURE__*/_jsx(CommentItem,{depth:depth+1,comment:comment},comment.id);})]})});}else{return'loading...';}}","map":{"version":3,"sources":["/Users/milantornier/Desktop/MySite/milansblog/src/components/Comments/Comments.js"],"names":["useState","useEffect","CommentItem","CommentForm","retrieveComments","styled","css","CommentSection","section","Button","button","Container","props","depth","Comments","comments","setComments","loaded","setLoaded","post","id","parent","updated","setUpdated","hideForm","setHideForm","hideReplies","setHideReplies","showRepliesText","setShowRepliesText","replyText","setReplytext","then","res","cleanup","showReplies","showForm","a","map","comment"],"mappings":"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","sourcesContent":["import {useState, useEffect} from 'react'\nimport CommentItem from './CommentItem'\nimport CommentForm from './CommentForm'\nimport {retrieveComments} from '../../service/WPService'\nimport styled, {css} from 'styled-components'\n\nconst CommentSection = styled.section`\nmargin-bottom:1.5em;\n`\n\nconst Button = styled.button`\n    margin-left:4em;\n    align-self:flex-end;\n    border: none;\n    background-color: transparent;\n    color: var(--secondary);\n    max-width:8em;\n`\n\nconst Container = styled.section`\n    display:flex;\n    flex-direction:column;\n    ${props => props.depth === 1 && css`\n        margin-left: 2em;\n    `}\n`\n\nexport default function Comments(props) {\n\n    const [comments, setComments] = useState([])\n    const [loaded, setLoaded] = useState(false)\n    const [id]  = useState(props.post)\n    const [parent] = useState(props.parent)\n    const [updated, setUpdated] = useState(false);\n\n    const [hideForm, setHideForm] = useState(false);\n    const [hideReplies, setHideReplies] = useState(false);\n\n    const [showRepliesText, setShowRepliesText] = useState('show replies')\n    const [replyText, setReplytext] = useState('reply')\n\n    const [depth] = useState(props.depth)\n    \n    useEffect( () => {\n\n        retrieveComments(id, parent).then( res =>\n            setComments(res),\n            setLoaded(true),\n            setUpdated(false)\n        )\n\n        return function cleanup() {\n            setLoaded(false);\n        }\n\n    }, [id, parent, updated])\n\n    const showReplies = () => {\n        setHideReplies(!hideReplies);\n        if(hideReplies){\n            setShowRepliesText('show replies')\n        } else {\n            setShowRepliesText('hide replies')\n        }\n    }\n\n    const showForm = () => {\n        setHideForm(!hideForm);\n        if(hideForm){\n            setReplytext('reply')\n        } else {\n            setReplytext('cancel')\n        }\n    }\n\n        if(loaded){\n            return (\n                <CommentSection>\n                    <Container depth={depth}>\n                        {depth===1 && <Button onClick={() => showForm()}>{replyText}</Button>}\n                        {(depth===0||hideForm) && \n                            <CommentForm\n                                updated={a => setUpdated(a)} \n                                post={id}\n                                parent={parent} \n                                key={'commentForm'+{parent}} \n                            />\n                        }\n                        {depth===1 && <Button onClick={() => showReplies()}>{showRepliesText}</Button> }\n                        {(depth===0||hideReplies) && comments.map(comment => (\n                            <CommentItem \n                                depth={depth+1}\n                                key={comment.id} \n                                comment={comment}\n                            />\n                        ))}\n                    </Container>\n                </CommentSection>\n            )\n        } else {\n            return 'loading...'\n        }\n}\n\n"]},"metadata":{},"sourceType":"module"}