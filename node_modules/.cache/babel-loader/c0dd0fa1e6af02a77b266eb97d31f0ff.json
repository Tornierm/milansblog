{"ast":null,"code":"var _jsxFileName = \"/Users/milantornier/Desktop/MySite/milansblog/src/components/Comments/Comments.js\",\n    _s = $RefreshSig$();\n\nimport { useState, useEffect } from 'react';\nimport CommentItem from './CommentItem';\nimport CommentForm from './CommentForm';\nimport { retrieveComments } from '../../service/WPService';\nimport styled, { css } from 'styled-components';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CommentSection = styled.section`\n    margin-bottom:1.5em;\n    background-color: var(--p-9);\n    padding:1em;\n`;\n_c = CommentSection;\nconst Button = styled.button`\n    align-self:flex-end;\n    width:8em;\n    text-align: center;\n    margin:0em 0em 0em .5em;\n    color: var(--p-1);\n    background-color:transparent;\n    border:none;\n    border-bottom: 1px var(--s-3) solid;\n    :hover{\n        color: var(--s-3);\n        transition:1s;\n        -webkit-transition:1s;\n        border-bottom: 1px var(--p-9) solid;\n    }\n    @media (max-width: 45em) {\n        width:100%;\n    }\n`;\n_c2 = Button;\nconst Container = styled.section`\n    display:flex;\n    flex-direction:column;\n    ${props => props.depth === 1 && css`\n        margin-left: 2em;\n    `}\n`;\n_c3 = Container;\nconst Buttons = styled.div`\n    display:flex;\n    justify-content:flex-end;\n    margin-bottom:.5em;\n`;\n_c4 = Buttons;\nexport default function Comments(props) {\n  _s();\n\n  const [comments, setComments] = useState([]);\n  const [loaded, setLoaded] = useState(false);\n  const [id] = useState(props.post);\n  const [parent] = useState(props.parent);\n  const [hideForm, setHideForm] = useState(false);\n  const [hideReplies, setHideReplies] = useState(false);\n  const [showRepliesText, setShowRepliesText] = useState('show replies');\n  const [replyText, setReplytext] = useState('reply');\n  const [depth] = useState(props.depth);\n  useEffect(() => {\n    console.log('retrieve');\n    retrieveComments(id, parent).then(res => setComments(res), setLoaded(true));\n    return function cleanup() {\n      setLoaded(false);\n    };\n  }, [id, parent]);\n\n  const showReplies = currently => {\n    setHideReplies(!currently);\n\n    if (hideReplies) {\n      setShowRepliesText('show replies');\n    } else {\n      setShowRepliesText('hide replies');\n    }\n  };\n\n  const showForm = currently => {\n    setHideForm(!currently);\n\n    if (hideForm) {\n      setReplytext('reply');\n    } else {\n      setReplytext('cancel');\n    }\n  };\n\n  const updateComments = newComment => {\n    showReplies(false);\n\n    if (newComment === null) {\n      return;\n    }\n\n    setComments(comments => [newComment, ...comments]);\n  };\n\n  if (loaded) {\n    return /*#__PURE__*/_jsxDEV(CommentSection, {\n      children: /*#__PURE__*/_jsxDEV(Container, {\n        depth: depth,\n        children: [/*#__PURE__*/_jsxDEV(Buttons, {\n          children: [depth === 1 && /*#__PURE__*/_jsxDEV(Button, {\n            onClick: () => showForm(hideForm),\n            children: replyText\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 109,\n            columnNumber: 43\n          }, this), depth === 1 && /*#__PURE__*/_jsxDEV(Button, {\n            onClick: () => showReplies(hideReplies),\n            children: showRepliesText\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 110,\n            columnNumber: 43\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 25\n        }, this), (depth === 0 || hideForm) && /*#__PURE__*/_jsxDEV(CommentForm, {\n          updateComments: x => updateComments(x),\n          post: id,\n          parent: parent\n        }, 'commentForm' + {\n          parent\n        }, false, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 25\n        }, this), (depth === 0 || hideReplies) && comments.map(comment => /*#__PURE__*/_jsxDEV(CommentItem, {\n          depth: depth + 1,\n          comment: comment\n        }, comment.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 29\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 17\n    }, this);\n  } else {\n    return 'loading...';\n  }\n}\n\n_s(Comments, \"fSZcJRqbwSxCh3c9C5pYQR2pSm4=\");\n\n_c5 = Comments;\n\nvar _c, _c2, _c3, _c4, _c5;\n\n$RefreshReg$(_c, \"CommentSection\");\n$RefreshReg$(_c2, \"Button\");\n$RefreshReg$(_c3, \"Container\");\n$RefreshReg$(_c4, \"Buttons\");\n$RefreshReg$(_c5, \"Comments\");","map":{"version":3,"sources":["/Users/milantornier/Desktop/MySite/milansblog/src/components/Comments/Comments.js"],"names":["useState","useEffect","CommentItem","CommentForm","retrieveComments","styled","css","CommentSection","section","Button","button","Container","props","depth","Buttons","div","Comments","comments","setComments","loaded","setLoaded","id","post","parent","hideForm","setHideForm","hideReplies","setHideReplies","showRepliesText","setShowRepliesText","replyText","setReplytext","console","log","then","res","cleanup","showReplies","currently","showForm","updateComments","newComment","x","map","comment"],"mappings":"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","sourcesContent":["import {useState, useEffect} from 'react'\nimport CommentItem from './CommentItem'\nimport CommentForm from './CommentForm'\nimport {retrieveComments} from '../../service/WPService'\nimport styled, {css} from 'styled-components'\n\nconst CommentSection = styled.section`\n    margin-bottom:1.5em;\n    background-color: var(--p-9);\n    padding:1em;\n`\n\n\n\nconst Button = styled.button`\n    align-self:flex-end;\n    width:8em;\n    text-align: center;\n    margin:0em 0em 0em .5em;\n    color: var(--p-1);\n    background-color:transparent;\n    border:none;\n    border-bottom: 1px var(--s-3) solid;\n    :hover{\n        color: var(--s-3);\n        transition:1s;\n        -webkit-transition:1s;\n        border-bottom: 1px var(--p-9) solid;\n    }\n    @media (max-width: 45em) {\n        width:100%;\n    }\n`\n\nconst Container = styled.section`\n    display:flex;\n    flex-direction:column;\n    ${props => props.depth === 1 && css`\n        margin-left: 2em;\n    `}\n`\n\nconst Buttons = styled.div`\n    display:flex;\n    justify-content:flex-end;\n    margin-bottom:.5em;\n`\n\nexport default function Comments(props) {\n\n    const [comments, setComments] = useState([])\n    const [loaded, setLoaded] = useState(false)\n    const [id]  = useState(props.post)\n    const [parent] = useState(props.parent)\n\n    const [hideForm, setHideForm] = useState(false);\n    const [hideReplies, setHideReplies] = useState(false);\n\n    const [showRepliesText, setShowRepliesText] = useState('show replies')\n    const [replyText, setReplytext] = useState('reply')\n\n    const [depth] = useState(props.depth)\n    \n    useEffect( () => {\n\n        console.log('retrieve')\n        retrieveComments(id, parent).then( res =>\n            setComments(res),\n            setLoaded(true),\n        )\n\n        return function cleanup() {\n            setLoaded(false);\n        }\n\n    }, [id, parent])\n\n    const showReplies = (currently) => {\n        setHideReplies(!currently);\n        if(hideReplies){\n            setShowRepliesText('show replies')\n        } else {\n            setShowRepliesText('hide replies')\n        }\n    }\n\n    const showForm = (currently) => {\n        setHideForm(!currently);\n        if(hideForm){\n            setReplytext('reply')\n        } else {\n            setReplytext('cancel')\n        }\n    }\n\n    const updateComments = (newComment) => {\n        showReplies(false);\n        if(newComment === null){\n            return;\n        }\n        setComments(comments => [newComment, ...comments])\n    }\n\n        if(loaded){\n            return (\n                <CommentSection>\n                    <Container depth={depth}>\n                        <Buttons>\n                            {depth===1 && <Button onClick={() => showForm(hideForm)}>{replyText}</Button>}\n                            {depth===1 && <Button onClick={() => showReplies(hideReplies)}>{showRepliesText}</Button> }\n                        </Buttons>\n                        {(depth===0||hideForm) && \n                            <CommentForm\n                                updateComments = {x => updateComments(x)} \n                                post={id}\n                                parent={parent} \n                                key={'commentForm'+{parent}} \n                            />\n                        }\n                        <br/>\n                        {(depth===0||hideReplies) && comments.map(comment => (\n                            <CommentItem \n                                depth={depth+1}\n                                key={comment.id} \n                                comment={comment}\n                            />\n                        ))}\n                    </Container>\n                </CommentSection>\n            )\n        } else {\n            return 'loading...'\n        }\n}\n\n"]},"metadata":{},"sourceType":"module"}